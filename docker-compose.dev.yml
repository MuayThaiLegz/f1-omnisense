# Development override: docker compose -f docker-compose.yml -f docker-compose.dev.yml up
name: f1-omnisense

services:

  backend:
    build:
      dockerfile: pipeline/Dockerfile.dev
    volumes:
      - ./pipeline:/app/pipeline
      - ./f1data:/app/f1data:ro
      - ./pipeline/output:/app/pipeline/output
      - ./output:/app/output
      - ./data:/app/data:ro
      - ./.env:/app/.env:ro

  frontend:
    build:
      dockerfile: frontend/Dockerfile.dev
    ports:
      - "5173:5173"
    volumes:
      - ./frontend:/app/frontend
      - /app/frontend/node_modules
      - ./f1data:/app/f1data:ro
      - ./pipeline/output:/app/pipeline/output:ro
      - ./data:/app/data:ro
      - ./.env:/app/.env:ro
    environment:
      - GROQ_API_KEY=${GROQ_API_KEY}
